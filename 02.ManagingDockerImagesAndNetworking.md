# Containerization With Docker

### Example of Creating the Docker Image with Python App
```sh
$ mkdir py-app
$ cd py-app
$ nano app.py
```
```py
# app.py
from flask import Flask
app = Flask(__name__)
@app.route("/")
def hello():
    return "welcome to Simplilearn!! successfully done !!"
if __name__ == "__main__":
    app.run(host='0.0.0.0', port=5000)
```
```sh
$ nano requirements.txt
```
```txt
flask
```
```sh
$ nano Dockerfile
```
```Dockerfile
# Use an official Pyton runtime as the parent image
FROM python:3.7-slim

# Set the working directory in the container to /app
WORKDIR /app

# Copy the current directory contents into the container at /app
ADD . /app

# Install any needed packages specified in requirements.txt [when the container image creation]
RUN pip install --trusted-host pypi.python.org -r requirements.txt

# Make the container's port 5000 available to the outside world
EXPOSE 5000

# Define environment variable [command to run the application]
ENTRYPOINT [ "python" ]

# Run app.py using python when the container launches
CMD [ "app.py" ]
```

```bash
$ docker build -t py-app:0.1 -f ./Dockerfile .
$ docker images
$ docker run --name py-app -dt -p 8085:5000 py-app:0.1
## Push the images to the Repo [Need to have docker hub account and create the repo]
$ curl http://localhost:8085
$ docker tag py-app:0.1  anandlearn/learn-apps:2.0
$ docker login
## Complete the login
$ docker push anandlearn/learn-apps:2.0 
```

### Example of Creating the Docker Image with Multi Stage Build
```sh
$ mkdir multi-stage-build
$ cd multi-stage-build
$ nano Dockerfile
```
```Dockerfile
FROM alpine AS stage1
RUN echo "Welcome to Docker Labs" > /opt/index.html
FROM nginx:alpine
COPY --from=stage1 /opt/index.html /usr/share/nginx/html/
ENTRYPOINT ["nginx", "-g", "daemon off;"]
```
```sh
$ docker build -t ms-app:0.1 -f ./Dockerfile .
```

## Docker Network
```sh
## To List networks
$ docker network ls
## To inspect bridge
$ docker network inspect bridge
## To create a network
$ docker network create --subnet 10.0.0.0/24 --gateway 10.0.0.1 demo_bridge
$ docker network inspect demo_bridge
$ docket network connect demo_bridge container_name
```
